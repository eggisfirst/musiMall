<import src="../../wxParse/wxParse.wxml"/>
<!-- <import src="../../html2wxml-template/html2wxml.wxml" /> -->


<view class='detail-container'>
  <banner imgUrls="{{productDetails.productImgs}}" swiperType="{{swiperType}}"/>

  <view class='price-box'>
    <view class='price'>
      <text class='now-price'>¥{{productDetails.productPrice}} </text>
      <text class='real-price'>¥{{productDetails.productOldPrice}}</text>
    </view>
    <view class='activity-count'>
      <text class='count-title' style='{{productDetails.activityState == 2? "font-size:30rpx": ""}}'>{{priceText}}</text>
      <view class='count' wx:if="{{productDetails.activityState != 2}}">
        <count endTime="{{endTime}}"/>
      </view>
    </view>
  </view>

  <view class='activity-progress'>
    <view class='progress-box'>
      <text>0</text>
      <progress 
        class='progress'
        percent="60" 
        stroke-width='6'
        backgroundColor='#ccc'
        activeColor='#ff3701'
        style='border-radius:7rpx;overflow:hidden'/>
      <text>{{productDetails.stock}}</text>
    </view>
    <!-- 动态更改left的值 -->
    <view class='hasRobbed' style='left: calc(66% - 105rpx)'>  
      <text>已抢{{productDetails.stock - productDetails.onsaleStock}}件</text>
    </view>
    
  </view>

  <view class='product-name'>
    <text>{{productDetails.productName}}</text>
  </view>

  <view class='product-descript'>
    <view class='content-box'>
      <text>{{productDetails.productDescription}}</text>
    </view>
  </view>

  <view class='product-size'>
    <text>产品规格： {{productDetails.productSpecification}}</text>
  </view>

  <view class='product-details'>
    <text class='title'>产品详情</text>
    <template is="wxParse" data="{{wxParseData:article.nodes}}"/>
    <!-- <template is="html2wxml" data="{{wxmlData:article}}" /> -->
  </view>

  <!-- <view class='bottomTab'>
    <bottomTab bind:clickRule='clickRule' bind:clickBeginBtn='clickBeginBtn'/>
  </view> -->
   <view class='bottomTab'>
    <bottomTab 
      bind:clickBeginBtn='clickBeginBtn'
      bind:openSelectNum='openSelectNum' 
      activityState="{{productDetails.activityState}}"
      regulation="{{productDetails.regulation}}"
      />
  </view>

  <!-- <view class='rule-box' hidden="{{showRules}}">
    <ruleTips class='ruleTips' bind:setRulesTips="setRulesTips" />
  </view> -->

   <view class='tips' hidden="{{showTips}}">
    <tipsBox class='tipsBox' bind:closeTips="closeTips" tipsText="{{tipsText}}"/>
  </view>

  <view class='selectNum-box' hidden='{{showSelect}}'>
    <selectNum class='selectNum' 
      productDetails="{{productDetails}}"
      queryData="{{queryData}}"
      bind:closeSelectNum="closeSelectNum"/>
  </view>
</view>
